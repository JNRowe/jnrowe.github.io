
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Formatting CSV files in the shell &#8212; JNRowe</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://jnrowe.github.io/articles/tips/Formatting_csv_files_in_the_shell.html" />
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Gentoo one liners" href="Gentoo_one_liners.html" />
    <link rel="prev" title="Finding a window’s owner" href="Finding_a_windows_owner.html" />
  
   
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
  <link rel="alternate" type="application/atom+xml"  href="../../blog/atom.xml" title="JNRowe">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
    <p class="read-time">
      <b>Estimated reading time</b>:
      3 minutes
    </p>
  

  <div class="section" id="formatting-csv-files-in-the-shell">
<h1>Formatting <abbr title="Comma Separated Values">CSV</abbr> files in the shell<a class="headerlink" href="#formatting-csv-files-in-the-shell" title="Permalink to this headline">¶</a></h1>
<p>kemi asks in <code class="docutils literal notranslate"><span class="pre">#bash</span></code>:</p>
<blockquote>
<div><p>Are there any tools to format <abbr title="Comma Separated Values">CSV</abbr> files in the console?  Not
interactive, no spreadsheets</p>
</div></blockquote>
<p><a class="reference external" href="http://www.linuxmanpages.com/man1/column.1.php">column</a>, which on Linux is likely to be provided by <a class="reference external" href="http://www.kernel.org/pub/linux/utils/util-linux-ng/">util-linux</a>, does exactly
this.  The man page even offers an example of how it works(I’ve changed it
slightly to make it work correctly on my system):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="o">(</span><span class="nb">echo</span> <span class="s2">&quot;PERM LINKS OWNER GROUP SIZE DATE HH:MM NAME&quot;</span><span class="p">;</span>
<span class="gp">&gt;</span>     ls -l static/ <span class="p">|</span> sed 1d<span class="o">)</span> <span class="p">|</span> column -t
<span class="go">PERM        LINKS  OWNER  GROUP  SIZE   DATE        HH:MM  NAME</span>
<span class="go">-rw-r--r--  1      jay    jay    328    2009-09-25  02:59  body_background.png</span>
<span class="go">-rw-r--r--  1      jay    jay    7234   2009-09-25  02:59  draft.png</span>
<span class="go">-rw-r--r--  1      jay    jay    6253   2009-09-25  02:59  extract-metadata.xsl</span>
<span class="go">-rw-r--r--  1      jay    jay    13143  2009-10-07  09:05  foaf.rdf</span>
<span class="go">-rw-r--r--  1      jay    jay    3580   2009-09-25  02:59  gpg.asc</span>
<span class="go">-rw-r--r--  1      jay    jay    7739   2009-09-25  02:59  icon.png</span>
<span class="go">-rw-r--r--  1      jay    jay    96     2009-09-25  02:59  meta_background.png</span>
<span class="go">-rw-r--r--  1      jay    jay    411    2009-09-29  11:39  remote.png</span>
</pre></div>
</div>
<p>Given some other standard commands we can mangle that data in various ways at
the shell prompt too, for example we may wish to display the total size of all
the files.  Or, as in the output below, the total size of all the <abbr title="Portable Network Graphics">PNG</abbr> files in the directory.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="o">(</span><span class="nb">echo</span> <span class="s2">&quot;PERM LINKS OWNER GROUP SIZE DATE HH:MM NAME&quot;</span>
<span class="gp">&gt;</span>     ls -l static/ <span class="p">|</span> sed 1d<span class="o">)</span> <span class="p">|</span> column -t <span class="p">|</span> awk <span class="s1">&#39;{print}</span>
<span class="gp">&gt;</span><span class="s1">         /\.png/ {sum+=$5}</span>
<span class="gp">&gt;</span><span class="s1">         END {print &quot;Total size of PNG files:&quot;, sum}&#39;</span>
<span class="go">PERM        LINKS  OWNER  GROUP  SIZE   DATE        HH:MM  NAME</span>
<span class="go">-rw-r--r--  1      jay    jay    328    2009-09-25  02:59  body_background.png</span>
<span class="go">-rw-r--r--  1      jay    jay    7234   2009-09-25  02:59  draft.png</span>
<span class="go">-rw-r--r--  1      jay    jay    6253   2009-09-25  02:59  extract-metadata.xsl</span>
<span class="go">-rw-r--r--  1      jay    jay    13143  2009-10-07  09:05  foaf.rdf</span>
<span class="go">-rw-r--r--  1      jay    jay    3580   2009-09-25  02:59  gpg.asc</span>
<span class="go">-rw-r--r--  1      jay    jay    7739   2009-09-25  02:59  icon.png</span>
<span class="go">-rw-r--r--  1      jay    jay    96     2009-09-25  02:59  meta_background.png</span>
<span class="go">-rw-r--r--  1      jay    jay    411    2009-09-29  11:39  remote.png</span>
<span class="go">Total size of PNG files: 15808</span>
</pre></div>
</div>
<p>In the original question on how to process <abbr title="Comma Separated Values">CSV</abbr> files all we really need to
do is get the data in to a state for <strong class="command">column</strong> to process, and we can
use <a class="reference external" href="http://www.linuxmanpages.com/man1/tr.1.php">tr</a> to do that.  An example using a small chunk of the network log on this
computer that we wish to format and calculate totals for could be:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cat stats
<span class="go">2009-07-15T05:09:42+0100,16803,4304661,129262665</span>
<span class="go">2009-07-16T04:10:29+0100,17551,4012917,67572304</span>
<span class="go">2009-07-16T19:03:00+0100,17621,1712073,34162500</span>
<span class="go">2009-07-17T14:18:19+0100,7961,1071313,26286593</span>
<span class="go">2009-07-17T18:23:40+0100,1867,308589,6057915</span>
<span class="go">2009-07-17T18:53:21+0100,1740,180197,2907388</span>
<span class="go">2009-07-17T19:00:03+0100,356,152917,928948</span>
<span class="go">2009-07-17T22:01:57+0100,6611,1159789,25562873</span>
<span class="go">2009-07-18T13:09:31+0100,1681,164663,2049315</span>
<span class="go">2009-07-18T13:24:04+0100,834,54025,662134</span>
<span class="gp">$</span> <span class="o">(</span><span class="nb">echo</span> <span class="s2">&quot;Date,Duration,Sent,Received&quot;</span><span class="p">;</span>  cat stats <span class="o">)</span> <span class="se">\</span>
&gt;     <span class="p">|</span> tr <span class="s1">&#39;,&#39;</span> <span class="s1">&#39; &#39;</span> <span class="p">|</span> column -t <span class="p">|</span> awk <span class="s1">&#39;{print}</span>
<span class="gp">&gt;</span><span class="s1">         !/Date/ {sent+=$3; recv+=$4}</span>
<span class="gp">&gt;</span><span class="s1">         END {print &quot;\nTotal sent: &quot;sent&quot;, Total received: &quot;recv}&#39;</span>
<span class="go">Date                      Duration  Sent     Received</span>
<span class="go">2009-07-15T05:09:42+0100  16803     4304661  129262665</span>
<span class="go">2009-07-16T04:10:29+0100  17551     4012917  67572304</span>
<span class="go">2009-07-16T19:03:00+0100  17621     1712073  34162500</span>
<span class="go">2009-07-17T14:18:19+0100  7961      1071313  26286593</span>
<span class="go">2009-07-17T18:23:40+0100  1867      308589   6057915</span>
<span class="go">2009-07-17T18:53:21+0100  1740      180197   2907388</span>
<span class="go">2009-07-17T19:00:03+0100  356       152917   928948</span>
<span class="go">2009-07-17T22:01:57+0100  6611      1159789  25562873</span>
<span class="go">2009-07-18T13:09:31+0100  1681      164663   2049315</span>
<span class="go">2009-07-18T13:24:04+0100  834       54025    662134</span>

<span class="go">Total sent: 13121144, Total received: 295452635</span>
</pre></div>
</div>
</div>

    <hr>

    <p class="keybase-verify">
      Authenticate this page by pasting <a
        href="https://raw.githubusercontent.com/JNRowe/jnrowe.github.io/source/articles/tips/Formatting_csv_files_in_the_shell.rst.asc">this signature</a> into
      <a href="https://keybase.io/verify">Keybase</a>.
    </p>

    <p class="edit-page">
      Have a suggestion or see a typo?  <a href="https://github.com/JNRowe/jnrowe.github.io/edit/source/articles/tips/Formatting_csv_files_in_the_shell.rst">Edit this page</a>
    </p>
  

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  Previous: 
  <a href="Gentoo_one_liners.html">
    
    Gentoo one liners
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  Next: 
  <a href="Making_a_nice_home.html">
    Making a nice home
    
  </a>
  </span>
  
</div>

  
  
  </div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo.png" alt="Logo"/>
    
  </a>
</p>









  
  
  <h2>
  
  
    2009-10-10
  
  </h2>

  <ul>
    

  
  <li id="author"><span>Author:</span>
    
      
      <a href="../../blog/author/james-rowe.html">James Rowe</a>
      
    </li>
  

  

  

  

  
  <li id="tags"><span>Tags:</span>
      
    
      
      <a href="../../blog/tag/csv.html">csv</a>
      
    
      
      <a href="../../blog/tag/unix.html">unix</a>
      
    </li>
  
  
  </ul>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">Projects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Articles</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../advent_of_code.html">Advent of Code 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo.html">Dropping Gentoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dropping_gentoo_reflex.html">Dropping Gentoo reflex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../evil_emacs_steals_my_heart.html">Evil Emacs steals my heart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fossil.html"><strong class="command">fossil</strong> experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../march_toward_death.html">Visualising the progress of time</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mutt_config_snippets.html"><strong class="command">mutt</strong> configuration snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rcs.html">Introduction to <abbr title="GNU Revision Control System">RCS</abbr></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tdd_distros.html"><abbr title="Test Driven Development">TDD</abbr> distro development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tiling_vs_tabbing.html">Tiling vs tabbing</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#further-categories">Further categories</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../thoughts/index.html">Thoughts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../colophon.html">Colophon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contact details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../consult.html">Consulting services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>


  <h3><a href="../../blog.html">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../march_toward_death.html">13 November - Visualising the progress of time</a></li>
    
      <li><a href="../evil_emacs_steals_my_heart.html">05 November - Evil Emacs steals my heart</a></li>
    
      <li><a href="readline_rename_imv.html">26 October - File renaming for the lazy</a></li>
    
      <li><a href="../tiling_vs_tabbing.html">08 October - Tiling vs tabbing</a></li>
    
      <li><a href="vim_day_night_colourscheme.html">15 September - Vim with day/night colourschemes</a></li>
    
  </ul>

  <h3><a href="../../blog/tag.html">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/gtk.html">GTK+</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/x11.html">X11</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/abook.html">abook</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/awesome.html">awesome</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/bash.html">bash</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/blog.html">blog</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/bts.html">bts</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/bugzilla.html">bugzilla</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/burnout.html">burnout</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/configs.html">configs</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/csv.html">csv</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/denoise.html">denoise</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/desktop.html">desktop</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/devel.html">devel</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/development.html">development</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/dzen.html">dzen</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/emacs.html">emacs</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/evil.html">evil</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/focus.html">focus</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/fossil.html">fossil</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../blog/tag/gentoo.html">gentoo</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/git.html">git</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/gmail.html">gmail</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/history.html">history</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/hobbies.html">hobbies</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/imv.html">imv</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/jnrowe-misc.html">jnrowe-misc</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../blog/tag/life.html">life</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../blog/tag/linux.html">linux</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/mail.html">mail</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/mutt.html">mutt</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/net.html">net</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/noise.html">noise</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/oss.html">oss</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/politics.html">politics</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/privacy.html">privacy</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/probit.html">probit</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/projects.html">projects</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/python.html">python</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/qmv.html">qmv</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/readline.html">readline</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/remind.html">remind</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/renameutils.html">renameutils</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/site.html">site</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/software.html">software</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../blog/tag/styling.html">styling</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/sup.html">sup</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/tabbed.html">tabbed</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/testing.html">testing</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/three.html">three</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/tiling.html">tiling</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/unix.html">unix</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-4">
        <a href="../../blog/tag/vcs.html">vcs</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../blog/tag/vim.html">vim</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/web.html">web</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-3">
        <a href="../../blog/tag/work.html">work</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/zsh.html">zsh</a></li>
      
    
  </ul>

  <h3><a href="../../blog/archive.html">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../blog/2018.html">2018 (6)</a></li>
    
  
    
    <li><a href="../../blog/2017.html">2017 (1)</a></li>
    
  
    
    <li><a href="../../blog/2014.html">2014 (12)</a></li>
    
  
    
    <li><a href="../../blog/2013.html">2013 (2)</a></li>
    
  
    
    <li><a href="../../blog/2011.html">2011 (1)</a></li>
    
  
    
    <li><a href="../../blog/2010.html">2010 (1)</a></li>
    
  
    
    <li><a href="../../blog/2009.html">2009 (24)</a></li>
    
  
    
    <li><a href="../../blog/2007.html">2007 (2)</a></li>
    
  
    
    <li><a href="../../blog/2003.html">2003 (1)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2009-2018  James Rowe.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>